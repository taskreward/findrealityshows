<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Casino App</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg: #121212;
  --card-bg: #1E2430;
  --text-primary: #E0E3E8;
  --text-secondary: #A0A8B0;
  --accent-gold: #FFD700;
  --accent-green: #00E5FF;
  --accent-blue: #4B4EFF;
}
* { margin:0; padding:0; box-sizing:border-box }
body {
  font-family: 'Inter', sans-serif;
  color: var(--text-primary);
  background: var(--bg);
  min-height: 100vh;
}
.hidden { display: none; }

/* Login styles */
.login-card {
  max-width: 320px;
  margin: 40px auto;
  background: var(--card-bg);
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.8);
  text-align: center;
}
.avatar {
  width: 72px; height: 72px;
  margin: 0 auto 16px;
  border-radius: 50%;
  background: var(--text-secondary);
  overflow: hidden; cursor: pointer;
}
.avatar img { width:100%; height:100%; object-fit: cover; }
.avatar-placeholder {
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center;
  font-size:2rem; color: var(--bg);
}
.login-card input {
  width:100%; padding:10px; margin-bottom:12px;
  border:none; border-radius:6px;
  background:#121526; color: var(--text-primary);
  font-size:1rem;
}
.login-card input::placeholder { color:#6B7280; }
.login-card label.remember {
  display:flex; align-items:center; margin-bottom:16px;
  font-size:0.9rem; cursor: pointer;
}
.login-card label.remember input {
  margin-right:8px; width:16px; height:16px;
}
.login-card button {
  width:100%; padding:12px;
  background: var(--accent-blue);
  color: var(--bg);
  font-weight:600; border:none; border-radius:8px;
  font-size:1rem; cursor:pointer;
  transition: background 0.3s;
}
.login-card button:hover { background: #3A40D5; }
.login-card .error {
  margin-top:12px;
  color:#FF6B6B; font-size:0.9rem;
}
#avatarInput { display:none; }

/* Dashboard styles */
.dashboard {
  display: flex; flex-direction: column; min-height: 100vh;
}
header {
  background: var(--card-bg);
  padding: 16px;
  display: flex; align-items:center; justify-content: space-between;
  box-shadow: 0 2px 8px rgba(0,0,0,0.8);
}
.user-info {
  display:flex; align-items:center;
}
.avatar-small {
  width:36px; height:36px; border-radius:50%;
  overflow:hidden; margin-right:8px; cursor:pointer;
}
.avatar-small img { width:100%; height:100%; object-fit:cover; }
.user-text .name {
  font-weight:600;
}
.user-text .meta {
  font-size:0.8rem; color:var(--text-secondary);
}
.logout-btn {
  background: var(--accent-green);
  border:none; color: var(--bg);
  padding: 8px 12px;
  border-radius:6px;
  font-weight:500; cursor: pointer;
  margin-right: 8px;
}
.withdraw-btn {
  background: var(--accent-gold);
  border: none;
  color: var(--bg);
  padding: 8px 12px;
  border-radius: 6px;
  font-weight:500;
  cursor:pointer;
}
.kpi-bar {
  display:flex; gap:12px;
  margin:24px 16px;
}
.kpi {
  flex:1; background: var(--card-bg);
  border:1px solid var(--text-secondary);
  padding:12px; border-radius:8px;
  text-align:center;
}
.kpi h3 {
  color: var(--accent-gold); font-size:1.1rem; margin-bottom:4px;
}
.kpi p {
  font-size:0.85rem; color:var(--text-secondary);
}
nav.tabs {
  display:flex; background: var(--card-bg);
}
nav.tabs button {
  flex:1; padding:12px;
  font-weight:600; background:none; border:none;
  color: var(--text-secondary); cursor:pointer;
  position:relative;
}
nav.tabs button.active { color: var(--text-primary); }
nav.tabs button.active::after {
  content:''; position:absolute; bottom:0; left:20%; right:20%;
  height:3px; background: var(--accent-gold); border-radius:2px;
}
.live-feed {
  margin:8px 16px; font-size:0.85rem;
  color: var(--accent-green); text-align:center;
}
.task-list {
  flex:1; overflow-y:auto;
  padding:16px;
}
.task-card {
  display:flex; align-items:center; justify-content:space-between;
  background: var(--card-bg);
  margin-bottom:12px; padding:16px;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.8);
  transition: transform .1s;
}
.task-card:active {
  transform: scale(0.97);
}
.accent {
  width:6px; height:100%; border-radius:4px;
  margin-right:12px;
}
.task-info { flex:1; }
.task-title {
  font-size:1rem; font-weight:600;
}
.task-meta {
  font-size:0.85rem;
  color: var(--text-secondary);
  margin-top:4px;
}
.btn-action {
  padding:10px 20px;
  font-weight:600;
  border:none;
  border-radius:8px;
  color:var(--bg);
  cursor:pointer;
  flex-shrink:0;
}
.btn-claim { background:var(--accent-gold); }

/* Modal */
.modal {
  position: fixed;
  top: 0; left: 0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.6);
  display:flex;
  align-items:center; justify-content:center;
  z-index:100;
}
.modal.hidden { display:none; }
.modal-content {
  background: var(--card-bg);
  padding: 24px; border-radius:12px;
  width:90%; max-width:320px;
  text-align:center;
}
.modal-content input {
  width:100%; padding:10px;
  margin:12px 0;
  border:none; border-radius:6px;
  background:#121526; color: var(--text-primary);
}
.modal-content button {
  margin:6px;
  padding:10px 16px;
  border:none; border-radius:6px;
  cursor:pointer;
}
#confirmWithdraw { background:var(--accent-green); color:var(--bg); }
#closeWithdraw { background:var(--accent-blue); color:var(--bg); }
.error-msg { color:#FF6B6B; font-size:0.9rem; margin-top:8px; }
</style>
</head>
<body>

<!-- Login View -->
<div id="view-login">
  <div class="login-card">
    <div class="avatar" id="loginAvatarLabel">
      <div class="avatar-placeholder">ðŸ‘¤</div>
      <img id="loginAvatarImg" src="" style="display:none"/>
    </div>
    <input type="file" accept="image/*" id="loginAvatarInput"/>
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username" required/>
    <input type="email" id="email" placeholder="Email" required/>
    <input type="password" id="password" placeholder="Password" required/>
    <label class="remember"><input type="checkbox" id="rememberMe"/> Remember Me</label>
    <button id="loginBtn">Log In</button>
    <div id="error" class="error"></div>
  </div>
</div>

<!-- Dashboard View -->
<div id="view-dashboard" class="hidden dashboard">
  <header>
    <div class="user-info">
      <label class="avatar-small" id="dashAvatarLabel">
        <img id="dashAvatarImg" src="" style="display:none"/>
        <svg id="dashPlaceholder" xmlns="http://www.w3.org/2000/svg" fill="#A0A8B0" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M12 14c-4 0-6 2-6 4v1h12v-1c0-2-2-4-6-4z"/></svg>
      </label>
      <div class="user-text">
        <div class="name" id="displayUsername"></div>
        <div class="meta" id="displayMeta"></div>
      </div>
    </div>
    <div>
      <button class="withdraw-btn" id="withdrawBtn">Withdraw</button>
      <button class="logout-btn" id="logoutBtn">Logout</button>
    </div>
  </header>
  <div class="kpi-bar">
    <div class="kpi"><h3 id="balanceDisplay">â‚¹1,280</h3><p>Balance</p></div>
    <div class="kpi"><h3>12</h3><p>Tasks Done</p></div>
    <div class="kpi"><h3>â‚¹120</h3><p>Weekly Win</p></div>
  </div>
  <nav class="tabs">
    <button data-tab="daily" class="active">Daily</button>
    <button data-tab="weekly">Weekly</button>
    <button data-tab="monthly">Monthly</button>
  </nav>
  <div class="live-feed">ðŸŽ‰ Ravi just won â‚¹500!</div>
  <ul class="task-list" id="task-list"></ul>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="modal hidden">
  <div class="modal-content">
    <h3>Withdraw Funds</h3>
    <input type="number" id="withdrawAmount" placeholder="Enter amount" />
    <button id="confirmWithdraw">Confirm</button>
    <button id="closeWithdraw">Cancel</button>
    <div id="withdrawError" class="error-msg"></div>
  </div>
</div>

<script>
// View toggle
const loginView = document.getElementById('view-login');
const dashView = document.getElementById('view-dashboard');
function showLogin(){ loginView.classList.remove('hidden'); dashView.classList.add('hidden'); }
function showDash(){ loginView.classList.add('hidden'); dashView.classList.remove('hidden'); }

// Avatar setup
function setupAvatarActions(labelId, inputId, imgId, placeholderId) {
  const label = document.getElementById(labelId);
  const input = document.getElementById(inputId);
  const img = document.getElementById(imgId);
  const placeholder = document.getElementById(placeholderId);
  const stored = localStorage.getItem('avatarPhoto');
  if (stored) {
    img.src = stored; img.style.display = 'block'; placeholder.style.display = 'none';
  }
  label.addEventListener('click', ()=> input.click());
  input.addEventListener('change', ()=>{
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = e=>{
      const data = e.target.result;
      img.src = data; img.style.display='block'; placeholder.style.display='none';
      localStorage.setItem('avatarPhoto', data);
    };
    reader.readAsDataURL(file);
  });
}
setupAvatarActions('loginAvatarLabel','loginAvatarInput','loginAvatarImg','loginAvatarImg');
setupAvatarActions('dashAvatarLabel','dashAvatarInput','dashAvatarImg','dashPlaceholder');

// Login logic
document.getElementById('loginBtn').addEventListener('click', ()=>{
  const username = document.getElementById('username').value.trim();
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  const remember = document.getElementById('rememberMe').checked;
  const err = document.getElementById('error');
  err.textContent = '';
  if (!username||!email||!password) {
    err.textContent = 'Fill all fields'; return;
  }
  if (remember) {
    localStorage.setItem('loggedIn','true');
    localStorage.setItem('username', username);
    localStorage.setItem('email', email);
  } else {
    sessionStorage.setItem('username', username);
    sessionStorage.setItem('email', email);
  }
  loadDashboard();
});

// Load dashboard
let currentBalance = 1280;
function loadDashboard(){
  const loggedIn = localStorage.getItem('loggedIn')==='true';
  const username = (loggedIn? localStorage : sessionStorage).getItem('username') || '';
  const email = (loggedIn? localStorage : sessionStorage).getItem('email') || '';
  if (!username||!email) { showLogin(); return; }
  document.getElementById('displayUsername').textContent = username;
  document.getElementById('displayMeta').textContent = `ID: 3038792 | ${email} | VIP0`;
  document.getElementById('balanceDisplay').textContent = `â‚¹${currentBalance}`;
  showDash();
  renderTasks('daily');
}

// Logout
document.getElementById('logoutBtn').onclick = ()=>{
  localStorage.removeItem('loggedIn');
  sessionStorage.clear();
  showLogin();
};

// Withdraw modal logic
const withdrawBtn = document.getElementById('withdrawBtn');
const withdrawModal = document.getElementById('withdrawModal');
const withdrawAmount = document.getElementById('withdrawAmount');
const confirmWithdraw = document.getElementById('confirmWithdraw');
const closeWithdraw = document.getElementById('closeWithdraw');
const withdrawError = document.getElementById('withdrawError');
const balanceDisplay = document.getElementById('balanceDisplay');

withdrawBtn.onclick = ()=>{
  withdrawAmount.value = '';
  withdrawError.textContent = '';
  withdrawModal.classList.remove('hidden');
};
closeWithdraw.onclick = ()=> withdrawModal.classList.add('hidden');
confirmWithdraw.onclick = ()=>{
  const amt = parseInt(withdrawAmount.value);
  if (isNaN(amt)||amt<=0) { withdrawError.textContent = 'Enter a valid amount'; return; }
  if (amt>currentBalance) { withdrawError.textContent = 'Insufficient balance'; return; }
  currentBalance -= amt;
  balanceDisplay.textContent = `â‚¹${currentBalance}`;
  withdrawModal.classList.add('hidden');
  alert(`Withdrawal of â‚¹${amt} successful.`);
};

// Task rendering
const tasks = {
  daily: [
    {title:"ðŸƒ Blackjack Bet", meta:"Live odds: 3.5x", color:"var(--accent-gold)"},
    {title:"ðŸŽ¯ Roulette Spin", meta:"Win big now!", color:"var(--accent-gold)"},
    {title:"ðŸŽ° Slot Machine", meta:"Max payout â‚¹1000", color:"var(--accent-gold)"}
  ],
  weekly:[{title:"ðŸ† Weekly Jackpot", meta:"Top prize â‚¹10,000", color:"var(--accent-gold)"}],
  monthly:[{title:"ðŸŽ‰ VIP Draw", meta:"Exclusive entries", color:"var(--accent-gold)"}]
};

function renderTasks(tab){
  const list = document.getElementById('task-list');
  list.innerHTML = '';
  tasks[tab].forEach(t=>{
    const li = document.createElement('li');
    li.className = 'task-card';
    li.innerHTML = `
      <div class="accent" style="background:${t.color}"></div>
      <div class="task-info">
        <div class="task-title">${t.title}</div>
        <div class="task-meta">${t.meta}</div>
      </div>
      <button class="btn-action btn-claim">Claim</button>`;
    li.querySelector('.btn-action').onclick = ()=> alert(`Claimed: ${t.title}`);
    list.appendChild(li);
  });
}

document.querySelectorAll('nav.tabs button').forEach(btn=>{
  btn.onclick = ()=>{
    document.querySelectorAll('nav.tabs button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    renderTasks(btn.dataset.tab);
  };
});

if (localStorage.getItem('loggedIn')==='true' || sessionStorage.getItem('username')) {
  loadDashboard();
} else {
  showLogin();
}
</script>
</body>
</html>
